# Changelog

All notable changes to the FinPessoal iOS app will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added - February 2026
- **Haptic Engine** (2026-02-01)
  - Added HapticEngine singleton for centralized haptic feedback
  - Impact haptics:
    - Light impact for subtle feedback
    - Medium impact for standard interactions
    - Heavy impact for significant events
    - Selection feedback for picker changes
  - Notification haptics:
    - Success feedback for completed actions
    - Warning feedback for alerts
    - Error feedback for failures
  - Custom haptic patterns using CoreHaptics:
    - Gentle success (tap-tap-tap) for subtle confirmations
    - Crescendo (light → medium → heavy) for celebrations
    - Warning pattern (tap-pause-tap) for alerts
  - CoreHaptics integration for complex custom patterns
  - Graceful fallback when haptics unavailable (simulator, unsupported devices)
  - Device capability detection (CHHapticEngine.capabilitiesForHardware)
  - Automatic fallback to notification haptics for custom patterns
  - Comprehensive test coverage with HapticEngineTests (3 test cases)
  - Ready for integration with animation system and UI interactions

- **Animation Engine Core** (2026-02-01)
  - Added AnimationEngine struct with reusable animation presets and configurations
  - Spring animation presets:
    - Gentle spring (response: 0.6, damping: 0.8) for subtle interactions
    - Bouncy spring (response: 0.5, damping: 0.6) for playful interactions
    - Snappy spring (response: 0.3, damping: 0.9) for quick feedback
    - Overdamped spring (response: 0.8, damping: 1.0) for smooth momentum
  - Timing curve presets:
    - Standard ease in-out (0.3s)
    - Quick fade (0.2s)
    - Slow ease (0.5s)
  - Mode-aware animation selection:
    - Full mode: Returns base animation unchanged
    - Reduced mode: Simplified easeInOut (0.2s)
    - Minimal mode: Returns nil (no animation)
  - Stagger delay constants:
    - Standard stagger (50ms) for list items
    - Quick stagger (30ms) for fast reveals
    - Slow stagger (100ms) for dramatic effect
  - Comprehensive test coverage with AnimationEngineTests (3 test cases)
  - Centralized animation configuration for consistent app-wide animations

- **Animation Mode System** (2026-02-01)
  - Added AnimationMode enum with three complexity levels:
    - Full: All animations including particles, complex transitions, parallax
    - Reduced: Simplified animations without decorative effects
    - Minimal: Instant transitions, fade-only effects
  - Added AnimationSettings singleton for global animation configuration:
    - Respects system Reduce Motion accessibility setting
    - User override option for accessibility preferences
    - Helper properties for particles, hero transitions, and parallax effects
  - Comprehensive test coverage with AnimationModeTests
  - Foundation for dashboard animation system

### Changed - December 2025
- **Migrated All Repositories to Firebase Realtime Database** (2025-12-24)
  - Removed Firestore dependency completely
  - Converted all Firestore repositories to use Realtime Database:
    - **FirebaseCategoryRepository**: Categories management with full CRUD
    - **FirebaseBillRepository**: Bills tracking with payment status, due dates, overdue detection
    - **FirebaseLoanRepository**: Loans management with payments and amortization schedules
    - **FirebaseCreditCardRepository**: Credit cards with transactions and statement generation
  - Removed unused Firestore repositories:
    - FirebaseSubcategoryRepository (deprecated)
    - FirebaseDynamicTransactionRepository (deprecated)
    - FirebaseDynamicCreditCardRepository (deprecated)
  - Database structure:
    - Main collections: `{collection}/{userId}/{itemId}`
    - Subcollections: `loanPayments/{userId}/{loanId}/{paymentId}`
    - Subcollections: `creditCardTransactions/{userId}/{cardId}/{transactionId}`
    - Subcollections: `creditCardStatements/{userId}/{cardId}/{statementId}`
  - Updated FirebaseConstants with new collection names:
    - categoriesCollection, billsCollection, loansCollection, creditCardsCollection
  - All repositories implement full protocol compliance:
    - Bills: Calculate total unpaid amounts, filter by status
    - Loans: Payment tracking, amortization schedule generation
    - Credit Cards: Transaction management, statement generation and payment
  - Simplified architecture - single database solution
  - Improved performance with Realtime Database's faster reads
  - Better offline support with Realtime Database persistence
  - Reduced Firebase costs - only one database to maintain
  - No Firestore setup required - eliminates "database does not exist" error
  - Added Firebase helper extensions:
    - `Loan+Firebase.swift`: toDictionary/fromDictionary for Loan and LoanPayment models
    - `CreditCard+Firebase.swift`: toDictionary/fromDictionary for CreditCard, CreditCardTransaction, and CreditCardStatement models
    - `Category+Firebase.swift`: toDictionary/fromDictionary for Category model
  - Removed deprecated factory methods from AppConfiguration
  - Removed all Mock repository files for deprecated features
  - Fixed all compilation errors and warnings:
    - Updated CreditCardStatement model conversion to include paidAmount, paidDate, and createdAt properties
    - Fixed Loan model conversion to handle endDate properly
    - Cleaned up unused variable warnings in FinancialAIService
  - **Build Status**: ✅ All compilation errors resolved, project builds successfully

### Added - December 2025
- **Firebase Crashlytics Integration** (2025-12-24)
  - Added Firebase Crashlytics for crash reporting and error tracking
  - Created CrashlyticsManager service for centralized crash logging
  - Features:
    - Automatic crash reporting with stack traces
    - User identification in crash reports (user ID, email, name)
    - Custom error logging for Firebase and authentication errors
    - Event logging for user actions (login, logout, CRUD operations)
    - Breadcrumb logging for navigation tracking
    - Environment tracking (development, staging, production)
    - Convenience methods for transaction, budget, goal, and account errors
  - Integrated into all ViewModels:
    - **AuthViewModel**: User authentication, login/logout tracking, auth errors
    - **TransactionViewModel**: Transaction CRUD operations, fetch errors, event tracking
    - **BudgetViewModel**: Budget creation/update/deletion events
    - **AccountViewModel**: Account fetch errors with context
    - **GoalViewModel**: Goal operations tracking
    - **BillsViewModel**: Bills management error logging
    - **FinanceViewModel**: Finance data aggregation errors
  - Error logging with context:
    - All Firebase errors logged with operation details
    - All authentication errors logged with auth type
    - All CRUD operations tracked as events
  - Initialized in AppDelegate with collection enabled
  - Environment automatically set based on build configuration
  - File: `Code/Core/Services/CrashlyticsManager.swift`
  - Full accessibility support maintained

- **Profile Photo in ProfileView** (2025-12-24)
  - Added AsyncImage to display user's profile photo in ProfileView screen
  - Profile photo now loads from user's profileImageURL (Google/Apple sign-in photo)
  - Displays circular profile image (100x100 points) in profile header
  - Falls back to system icon placeholder if no photo available
  - Matches implementation from SettingsScreen for consistency
  - Maintains full accessibility support

- **Architecture Diagram** (2025-12-23)
  - Generated comprehensive Excalidraw architecture diagram for FinPessoal iOS app
  - Visual representation of all architectural layers:
    - Presentation Layer: SwiftUI Views for all 20+ features
    - Business Logic Layer: ViewModels with MVVM pattern
    - Repository Pattern: Protocols, Mock repositories, and Firebase repositories
    - Core Services: FirebaseService, AI, Analytics, Notifications, Widget Sync, Deep Links, Live Activities
    - Firebase Backend: Authentication, Realtime Database, Analytics, Crashlytics
  - Shows data flow from users through all layers to Firebase backend
  - Includes external authentication providers (Google Auth, Apple Auth)
  - Color-coded components by type (Frontend: Blue, Backend: Purple, Database: Green, etc.)
  - Elbow-style arrows showing relationships and dependencies
  - Complete with all 20+ app features: Auth, Dashboard, Transactions, Budget, Goals, Reports, Accounts, Bills, CreditCards, Loans, Categories, Profile, Settings, Onboarding, Help, Insights
  - Saved to: docs/architecture/finpessoal-architecture.excalidraw
  - Can be opened in Excalidraw.com or VS Code Excalidraw extension

### Fixed - December 2025
- **MockRepository runtime crash** (2025-12-21)
  - Added `@MainActor` annotation to `MockTransactionRepository` and `MockAccountRepository`
  - Fixed memory corruption during deinitialization when used with SwiftUI views
  - Root cause: Async Task.sleep operations still running during object deallocation
  - Solution: `@MainActor` ensures proper actor isolation and prevents concurrent access during cleanup
  - Error: `___BUG_IN_CLIENT_OF_LIBMALLOC_POINTER_BEING_FREED_WAS_NOT_ALLOCATED`

- **PerformanceTests.swift compilation errors** (2025-12-21)
  - Fixed throwing function calls in non-throwing measure blocks:
    - Used `try!` for controlled test data inside `measure` closures (lines 20, 30, 40, 50)
    - Added `try` in map closures for dictionary conversions outside measure blocks (lines 36, 46)
  - Updated deprecated XCTest performance metrics API:
    - `measureMetrics([.memoryPhysical])` → `measure(metrics: [XCTMemoryMetric()])` (line 159)
  - Root cause: `measure` blocks expect non-throwing closures `() -> Void`
  - Solution: Used `try!` (force try) for controlled test data, which is safe and appropriate for performance tests
  - All compilation errors resolved successfully
- **ViewModel Tests fixes** (2025-12-20)
  - **AccountViewModelTests.swift**:
    - Changed `FirebaseError.authenticationError` to `FirebaseError.databaseError`
    - Replaced `activeAccounts` test with `accountsByType` test
  - **TransactionViewModelTests.swift**:
    - Changed `AuthError.userNotAuthenticated` to `AuthError.noCurrentUser`
    - Changed `TransactionCategory.freelance` to `.investment`
    - Fixed Transaction initializer argument order in helper method
  - **BudgetViewModelTests.swift**:
    - Fixed optional `Date?` comparisons for `createdAt` and `updatedAt`
  - **NavigationStateTests.swift**:
    - Changed `MainTab.reports` to `.more` (reports tab doesn't exist)
    - Fixed Transaction initializer argument order in helper method

- **MockRepositoryTests fixes** (2025-12-20)
  - Fixed `Transaction` initializer argument order (description before category/type)
  - Changed `AuthError.userNotAuthenticated` to `AuthError.noCurrentUser`
  - Added `Equatable` conformance to `FirebaseError` and `AuthError`
  - Added testable properties to `MockAccountRepository`:
    - `mockAccounts` - settable accounts array
    - `shouldFail` - flag to trigger errors
    - `mockError` - customizable error to throw
    - `delay` - configurable operation delay
  - Added testable properties to `MockTransactionRepository`:
    - `mockTransactions` - settable transactions array
    - `shouldFail` - flag to trigger errors
    - `mockError` - customizable error to throw
    - `mockTotalIncome` - override for statistics
    - `mockTotalExpenses` - override for statistics
    - `delay` - configurable operation delay

### Added - December 2025
- **Old Money Color Palette Tests** (2025-12-20)
  - Comprehensive test suite for Old Money theme implementation
  - **OldMoneyColorsTests.swift** - Tests for color values:
    - Light mode base colors (ivory, cream, warmGray, stone, charcoal)
    - Dark mode base colors (charcoal, slate, darkStone, mutedIvory, ivory)
    - Accent colors (antiqueGold, softGold)
    - Semantic colors (income, expense, warning, error, success)
    - Category colors (food, transport, entertainment, etc.)
    - Contrast tests (background vs surface)
    - Color extension tests (Color.oldMoney accessors)
  - **WidgetColorsTests.swift** - Tests for widget colors:
    - Singleton pattern verification
    - Light/dark mode base colors
    - Accent and semantic colors
    - Adaptive color existence
    - Gradient tests
    - Color extension tests (Color.widget)
    - Consistency tests (widget colors match app colors)
  - **OldMoneyThemeTests.swift** - Tests for theme configuration:
    - Typography fonts (headline, title, body, caption, money)
    - Shadow configurations (card, button, elevated, none)
    - Border radius values (small, medium, large, extraLarge, circular)
    - Border width values
    - Spacing values (xs, sm, md, base, lg, xl, xxl)
    - Animation durations (fast, standard, slow)
    - View modifier existence tests
    - Consistency tests (values increase progressively)
    - Accessibility tests (minimum sizes)

- **Old Money Color Palette Migration** (2025-12-19)
  - Applied Old Money color palette across the app and widget views
  - **Updated App Screens**:
    - Dashboard (DashboardScreen, StatCard, BalanceCardView)
    - Main/Navigation (iPadMainView, MoreScreen, LoginView, EmptyStateView)
    - Auth and Onboarding screens
    - Account feature (AccountsView, AccountDetailView, AccountCard, etc.)
    - Transaction feature (TransactionsScreen, TransactionRow, etc.)
    - Budget feature (BudgetScreen, BudgetCard, BudgetDetailSheet, BudgetCategoriesScreen)
    - Bills feature (BillsScreen, BillRow, BillDetailView)
    - Goals feature (GoalScreen, GoalCard, GoalProgressSheet)
    - Reports feature (ReportsScreen, ReportSummaryCard, MetricView, SavingsRateView)
    - CreditCard feature (CreditCardsScreen, CreditCardDetailView, summary cards)
    - Loan feature (LoansScreen, summary cards, loan rows)
    - Categories feature (CategoriesManagementScreen, category chips, subcategory rows)
    - QuickActions feature (QuickActionsView, QuickActionButton)
  - **Updated Widget Views**:
    - BalanceWidgetView - Income/expense colors, text hierarchy
    - BudgetWidgetView - Progress indicators, budget status colors
    - BillsWidgetView - Due date urgency colors, status indicators
    - GoalsWidgetView - Progress rings, milestone colors
    - CreditCardWidgetView - Utilization gauges, brand colors
    - TransactionsWidgetView - Income/expense styling
  - Color mappings:
    - `.primary` -> `Color.oldMoney.text`
    - `.secondary` -> `Color.oldMoney.textSecondary`
    - `.green` -> `Color.oldMoney.income`
    - `.red` -> `Color.oldMoney.expense`
    - `.blue` -> `Color.oldMoney.accent`
    - `.orange` -> `Color.oldMoney.warning`
    - `.systemBackground` -> `Color.oldMoney.background`
    - `.systemGray6` -> `Color.oldMoney.surface`
  - Widgets use `Color.widget.x` for lightweight palette access

- **Old Money Color Palette** (2025-12-18)
  - Implemented sophisticated "Old Money" color theme with understated elegance aesthetic
  - **Core Files**:
    - OldMoneyColors.swift - Raw color definitions with Light/Dark mode support
    - Color+OldMoney.swift - SwiftUI extension for easy palette access (`Color.oldMoney.background`)
    - OldMoneyTheme.swift - Typography, shadows, spacing, and animation configurations
    - WidgetColors.swift (Shared/) - Lightweight colors for widget extension
  - **Light Mode Base Colors**:
    - Ivory (#FAF8F5) - Primary background
    - Cream (#F5F2EC) - Card/surface backgrounds
    - Warm Gray (#E8E4DD) - Dividers, subtle borders
    - Stone (#9C9589) - Secondary text, icons
    - Charcoal (#3D3A36) - Primary text
  - **Dark Mode Base Colors**:
    - Charcoal Dark (#1C1B19) - Primary background
    - Slate (#2A2826) - Card/surface backgrounds
    - Dark Stone (#3D3A36) - Dividers, subtle borders
    - Muted Ivory (#A8A49C) - Secondary text
    - Ivory (#FAF8F5) - Primary text
  - **Accent Colors**:
    - Antique Gold (#B8965C) - Primary accent, CTAs, highlights
    - Soft Gold (#D4BA8A) - Secondary accent, hover states
  - **Semantic Colors** (with Light/Dark variants):
    - Income Green, Expense Rose, Warning Amber, Error Burgundy
    - Success Sage, Neutral Steel, Attention Terracotta
  - **10 Muted Category Colors** for transaction categories
  - **Typography System**:
    - Headlines: System Serif (New York) - Medium weight
    - Body: SF Pro - Regular weight
    - Money: SF Pro Rounded - Medium weight
    - Captions: SF Pro - Light weight
  - **Polish Details**:
    - Shadows: Subtle 5-8% opacity charcoal shadows
    - Border Radius: 8pt (small), 12pt (medium), 16pt (large)
    - Animations: 200-300ms easeInOut, no bouncing
  - **View Modifiers**: oldMoneyCard(), oldMoneyButton(), oldMoneyBackground()
  - **WCAG AA Compliant** contrast ratios for accessibility
  - Design document: Docs/plans/2025-12-18-old-money-color-palette-design.md

- **Widget Suite Implementation** (2025-12-17)
  - Implemented complete widget suite as designed in the widget design document
  - **Home Screen Widgets (6 widgets)**:
    - Balance Widget (Small/Medium/Large) - Total balance with account breakdown
    - Budget Widget (Medium/Large) - Budget progress with visual indicators
    - Bills Widget (Small/Medium) - Upcoming bills with due date countdown
    - Goals Widget (Small/Medium/Large) - Goal progress with circular gauges
    - Credit Card Widget (Small/Medium) - Card utilization overview
    - Transactions Widget (Medium/Large) - Recent transactions list
  - **Lock Screen Widgets (4 widgets)**:
    - Balance Lock Widget (Circular/Rectangular/Inline) - Quick balance view
    - Bills Lock Widget (Circular/Rectangular/Inline) - Next bill reminder
    - Budget Lock Widget (Circular/Rectangular/Inline) - Budget gauge
    - Goals Lock Widget (Circular/Rectangular/Inline) - Goal progress
  - **Live Activities (4 types)**:
    - Bill Reminder Live Activity - Dynamic Island with payment countdown
    - Budget Alert Live Activity - Real-time budget progress tracking
    - Goal Milestone Live Activity - Goal contribution tracking
    - Credit Card Reminder Live Activity - Payment due reminders
  - **Data Layer**:
    - SharedDataManager - App Groups data sync between app and widgets
    - WidgetDataProvider - Model conversion for lightweight widget data
    - WidgetSyncService - Centralized sync orchestration
  - **Deep Linking**:
    - URL scheme: finpessoal://
    - Supports navigation to all app sections from widgets
    - DeepLinkHandler with destination parsing
  - **LiveActivityManager** - Start/Update/End lifecycle management
  - Full accessibility with VoiceOver labels on all widgets
  - Unit tests for widget data models and deep link handling
  - Updated Info.plist with URL scheme and NSSupportsLiveActivities

- **Widget Suite Design Document** (2025-12-16)
  - Comprehensive design for iOS widgets including Home Screen, Lock Screen, and Live Activities
  - Home Screen widgets: Balance, Monthly Summary, Budget, Bills, Goals, Credit Card, Recent Transactions
  - Lock Screen widgets: Balance, Bills Due, Budget, Goals, Quick Expense
  - Live Activities: Bill Reminders, Budget Alerts, Goal Milestones, Credit Card Reminders
  - Smart refresh strategy with different intervals per widget type
  - Hybrid data architecture with App Groups cache + Firebase background refresh
  - Deep links for quick actions (add transaction, pay bill, view details)
  - Full accessibility support (VoiceOver, Dynamic Type, High Contrast)
  - Design document: Docs/plans/2025-12-16-widgets-design.md

### Added - October 2025
- **Comprehensive Accessibility Implementation Across Entire App** (2025-10-31)
  - Implemented WCAG 2.1 Level AA accessibility standards throughout the entire FinPessoal iOS app
  - Created ACCESSIBILITY_GUIDELINES.md with comprehensive implementation patterns and examples
  - Created ACCESSIBILITY_TESTING_CHECKLIST.md with 15 sections and 200+ checkpoints
  - Added VoiceOver support to 60+ screens and 175+ components
  - All authentication, onboarding, and login screens now fully accessible
  - Complete accessibility for Dashboard with balance cards and statistics
  - Full accessibility for Transactions including list, detail, and add/edit forms
  - Complete accessibility for Budget management including progress tracking
  - Full accessibility for Goals with progress indicators and contribution forms
  - Complete accessibility for Account management and detail views
  - Full accessibility for Bills tracking with status and payment actions
  - Complete accessibility for Reports including charts with text alternatives
  - Full accessibility for Help system with search and category navigation
  - Complete accessibility for Settings, Profile, and navigation components
  - All decorative elements hidden from VoiceOver with .accessibilityHidden(true)
  - All interactive elements have descriptive labels, hints, and proper traits
  - All form fields include labels, hints, and dynamic value announcements
  - All progress indicators announce percentages and amounts
  - All empty states provide clear guidance and next actions
  - All financial data properly formatted and announced
  - All charts and visualizations have comprehensive text alternatives
  - All tables and lists properly structured with headers
  - All buttons include action hints and state feedback
  - All pickers announce current selection
  - All toggles announce enabled/disabled state
  - Combined related elements for better VoiceOver flow
  - Proper accessibility traits (.isButton, .isHeader, .isStaticText, .isSelected)
  - Loading states announce progress with .updatesFrequently trait
  - Error messages announced with "Error:" prefix
  - Validation feedback in form fields
  - Currency and financial values with proper formatting
  - Date and time information clearly stated
  - Status indicators (paid/unpaid, active/inactive, complete/incomplete) announced
  - Over-budget and goal progress warnings clearly communicated
  - Navigation hints for all interactive elements
  - Section headers marked throughout the app
  - Tab bar items with descriptive labels and hints
  - Sidebar navigation fully accessible on iPad
  - Search functionality with labels and hints
  - Filter and sort controls accessible
  - Toolbar buttons with clear labels and action descriptions
  - Sheet and modal presentations properly accessible
  - All 7 main features (Dashboard, Transactions, Budgets, Goals, Accounts, Bills, Reports) fully accessible
  - Support for Dynamic Type throughout the app
  - Color contrast meets WCAG standards
  - Interactive elements meet minimum 44x44pt tap target size
  - Logical tab order maintained
  - Comprehensive testing checklist with scenarios for each feature
- **Comprehensive Accessibility for Navigation and Settings** (2025-10-30)
  - Added full VoiceOver support to all Navigation, Settings, and Common UI components
  - MainTabView: Added accessibility labels and hints for all tab items
  - MainTabView: Each tab now announces its purpose clearly (e.g., "View your financial dashboard and overview")
  - MainTabView: Converted tab items to use Label for better semantic structure
  - SidebarView: Added accessibility labels for navigation sections (Profile, Main Menu, Tools, Configuration)
  - SidebarView: User profile row with combined accessibility and proper hints
  - SidebarRow: Added navigation hints for all sidebar items
  - UserProfileRow: User name and email with descriptive labels
  - UserProfileRow: Sign out button with clear action description
  - UserProfileRow: Decorative avatar icon hidden from VoiceOver
  - SettingsScreen: Profile button with combined user information
  - SettingsScreen: Currency setting with current selection announced
  - SettingsScreen: Language setting with current selection announced
  - SettingsScreen: All settings rows with descriptive labels and hints
  - SettingsScreen: Decorative icons (chevrons, icons) hidden from VoiceOver
  - SettingsScreen: Reset onboarding button with clear warning
  - SettingsScreen: Sign out button with account action warning
  - SettingsRow: Combined element with proper button traits
  - CurrencySettingsView: Currency options with selected state announced
  - CurrencySettingsView: Checkmark icons hidden from VoiceOver
  - CurrencySettingsView: Each currency shows name and code in label
  - LanguageSettingsView: Language options with selected state announced
  - LanguageSettingsView: Flag emojis hidden from VoiceOver
  - LanguageSettingsView: Each language shows name clearly
  - ProfileView: Profile header with combined user information
  - ProfileView: Name, email, and member since date with descriptive labels
  - ProfileView: Decorative avatar icon hidden from VoiceOver
  - ProfileSettingRow: Settings preview with label-value pairs
  - ProfileSettingRow: Navigation hints for accessing settings
  - ProfileSettingRow: Decorative icons hidden from VoiceOver
  - ProfileView: Account action buttons with clear labels and hints
  - ProfileView: Export data, privacy policy, and terms buttons
  - ProfileView: Section headers marked with .isHeader trait
  - ProfileView: Dividers hidden from VoiceOver
  - QuickActionButton: Icon hidden, text properly announced
  - QuickActionButton: Descriptive hints for button actions
  - QuickActionsView: Section header marked with .isHeader trait
  - QuickActionsView: Reports NavigationLink with proper accessibility
  - QuickActionsView: All decorative icons hidden from VoiceOver
  - EmptyStateView: Enhanced with label, value, and static text trait
  - EmptyStateView: Decorative icon hidden from VoiceOver
  - EmptyStateView: Title and subtitle combined for better context
  - StatCard: Already had good accessibility (label combining title and value)
  - All decorative images and icons marked with .accessibilityHidden(true)
  - All interactive elements have proper .isButton traits where appropriate
  - All section headers marked with .isHeader trait
  - Selected states announced with .isSelected trait in pickers
  - Follows WCAG 2.1 Level AA accessibility standards
- **Comprehensive Accessibility for Bills Feature** (2025-10-30)
  - Added full VoiceOver support to all Bills screens and components
  - BillsScreen: Added accessibility labels, hints, and values for all toolbar buttons
  - BillsScreen: Loading indicator with descriptive label and hint
  - BillsScreen: Filter button with active/inactive state announcement
  - BillsScreen: Add bill button with clear action description
  - BillsScreen: Statistics section with container accessibility
  - BillsScreen: Search bar with proper labels, hints, and value feedback
  - BillsScreen: Clear search button with descriptive action
  - BillsScreen: Bill list items with tap hints for detail view
  - BillsScreen: Swipe actions with contextual labels (delete, mark as paid)
  - BillsScreen: Empty state with combined accessibility and hidden decorative icon
  - BillsScreen: No results view with clear filter button
  - BillsScreen: Filter sheet with done and clear buttons
  - AddBillScreen: All form fields with labels, hints, and values
  - AddBillScreen: Bill name field with empty state feedback
  - AddBillScreen: Amount field with currency format guidance
  - AddBillScreen: Due day picker with day of month context
  - AddBillScreen: Category and subcategory pickers with current selection
  - AddBillScreen: Payment account picker with selection announcement
  - AddBillScreen: Reminder period picker with descriptive values
  - AddBillScreen: Notes text editor with proper accessibility
  - AddBillScreen: Active status toggle with enabled/disabled state
  - AddBillScreen: Save button with validation state feedback
  - AddBillScreen: Cancel button with discard warning
  - AddBillScreen: Decorative category icons hidden from VoiceOver
  - BillRow: Combined row element with comprehensive bill information
  - BillRow: Bill name, amount, status, and due date in one announcement
  - BillRow: Payment status clearly indicated (paid/unpaid/overdue)
  - BillRow: Days until due or overdue days included in description
  - BillRow: Mark as paid button with contextual action
  - BillRow: Decorative status circles and icons hidden
  - BillRow: .isButton trait for proper interaction
  - BillDetailView: Header with bill name and category as header element
  - BillDetailView: Status badge with combined status information
  - BillDetailView: Amount display with clear label and value
  - BillDetailView: Bill details section with container accessibility
  - BillDetailView: Due day, reminder, and active status with labels
  - BillDetailView: Next due date with days remaining/overdue
  - BillDetailView: Last paid date when available
  - BillDetailView: Mark as paid button with confirmation hint
  - BillDetailView: Delete button with permanent action warning
  - BillDetailView: Done button with close action
  - BillDetailView: Notes section with proper value announcement
  - BillDetailView: DetailRow component with label-value pairs
  - BillDetailView: Decorative category icons hidden from VoiceOver
  - All decorative images and icons marked with .accessibilityHidden(true)
  - All interactive elements have proper .isButton traits
  - Financial values announced with proper currency formatting
  - Status information includes payment state and urgency
  - Follows WCAG 2.1 Level AA accessibility standards

- **Comprehensive Accessibility for Account Feature** (2025-10-30)
  - Added full VoiceOver support to all Account screens and components
  - AccountsView: Added accessibility labels, hints, and values for all interactive elements
  - AccountsView: Toolbar add button with descriptive label and hint
  - AccountsView: Empty state with combined accessibility and proper hints
  - AccountsView: Summary section headers marked with .isHeader trait
  - AccountsView: Summary cards with combined labels and values
  - AccountsView: Account count label with proper accessibility
  - EnhancedAccountCard: Combined card element with account name, type, and balance
  - EnhancedAccountCard: Decorative icons (account type icon, checkmark, chevron) hidden from VoiceOver
  - EnhancedAccountCard: Balance and status information in accessibility value
  - EnhancedAccountCard: Tap hint for editing account
  - AddAccountView: All form fields with labels, hints, and values
  - AddAccountView: Section headers marked with .isHeader trait
  - AddAccountView: Account name field with empty state feedback
  - AddAccountView: Account type picker with current selection announced
  - AddAccountView: Initial balance field with proper accessibility
  - AddAccountView: Currency picker with current currency announced
  - AddAccountView: Active toggle with current state announced
  - AddAccountView: Save and close buttons with clear actions
  - AccountsCard: Combined card element with comprehensive account information
  - AccountsCard: Decorative account icon hidden from VoiceOver
  - AccountsCard: Account name, type, and balance properly announced
  - AccountDetailView: Header section with balance and account type
  - AccountDetailView: Close and options menu buttons with descriptive labels
  - AccountDetailView: Account options menu with clear accessibility
  - AccountDetailView: Stats section with transaction count and status
  - AccountDetailView: Empty transactions state with combined accessibility
  - AccountDetailView: Recent transactions header marked with .isHeader trait
  - AccountDetailView: View all transactions button with count
  - EditAccountView: All form fields with labels, hints, and values
  - EditAccountView: Section headers marked with .isHeader trait
  - EditAccountView: Account information section with creation and update dates
  - EditAccountView: Delete button with clear warning
  - EditAccountView: Save and close buttons with validation feedback
  - All decorative images and icons marked with .accessibilityHidden(true)
  - All interactive elements have proper .isButton traits
  - Financial values announced with proper currency formatting
  - Form validation states communicated through accessibility
  - Follows WCAG 2.1 Level AA accessibility standards

- **Comprehensive Accessibility for Budget Feature** (2025-10-30)
  - Added full VoiceOver support to all Budget screens and components
  - BudgetScreen: Added accessibility labels, hints, and values for toolbar buttons
  - BudgetScreen: Empty state with combined accessibility and proper hints
  - BudgetScreen: Budget summary section with individual and combined accessibility
  - BudgetScreen: Progress bars with percentage and amount announcements
  - BudgetScreen: Alert section header marked with .isHeader trait
  - BudgetScreen: Budget list items with .isButton trait and tap hints
  - AddBudgetScreen: All form fields with labels, hints, and values
  - AddBudgetScreen: Budget name field with empty state feedback
  - AddBudgetScreen: Category picker with current selection announced
  - AddBudgetScreen: Amount field with currency context
  - AddBudgetScreen: Period picker with descriptive labels
  - AddBudgetScreen: Date pickers with proper accessibility
  - AddBudgetScreen: Alert threshold slider with current value in hint
  - AddBudgetScreen: Save button with validation state feedback
  - AddBudgetScreen: Decorative currency symbols and icons hidden from VoiceOver
  - BudgetCard: Combined card element with comprehensive budget information
  - BudgetCard: Category name and icon properly announced
  - BudgetCard: Spent vs budgeted amounts with over-budget indication
  - BudgetCard: Progress bar with percentage and amounts
  - BudgetCard: Warning messages for over-budget and near-limit states
  - BudgetCard: Decorative icons hidden, status information in labels
  - BudgetRowView: Combined row element with budget summary
  - BudgetRowView: Over-budget status included in accessibility value
  - BudgetRowView: Tap hint for viewing details
  - BudgetAlertRowView: Alert context with budget name and status
  - BudgetAlertRowView: Usage percentage and amount announced
  - BudgetAlertCard: Warning level (alert/over-budget) clearly stated
  - BudgetAlertCard: Spent vs budgeted amounts in accessibility value
  - BudgetDetailSheet: Header with budget name and category
  - BudgetDetailSheet: Progress circle with usage percentage and over-budget status
  - BudgetDetailSheet: Individual accessibility for budgeted, spent, and remaining amounts
  - BudgetDetailSheet: Period information with descriptive labels
  - BudgetDetailSheet: Daily available budget calculation announced
  - BudgetDetailSheet: Period dates with full date format
  - BudgetDetailSheet: Delete and Done buttons with clear actions
  - All decorative images and icons marked with .accessibilityHidden(true)
  - All interactive elements have proper .isButton traits
  - Progress information includes percentages and amounts
  - Financial values announced with proper currency formatting
  - Follows WCAG 2.1 Level AA accessibility standards

- **Comprehensive Accessibility for Goals Feature** (2025-10-30)
  - Added full VoiceOver support to all Goals screens and components
  - GoalScreen: Added accessibility labels, hints, and traits for all interactive elements
  - GoalScreen: Section headers marked with .isHeader trait
  - GoalScreen: Empty state with combined accessibility
  - GoalScreen: View mode picker with descriptive labels and hints
  - AddGoalScreen: All form fields with labels, hints, and values
  - AddGoalScreen: Decorative currency symbols hidden from VoiceOver
  - AddGoalScreen: Proper accessibility for date picker and calculations
  - AddGoalScreen: Disabled state feedback for save button
  - GoalCard: Combined card element with comprehensive progress information
  - GoalCard: Progress bars hidden from VoiceOver (information in labels)
  - GoalCard: Decorative icons hidden, completion status announced
  - GoalProgressSheet: Progress circle with percentage announcement
  - GoalProgressSheet: Amount details with individual accessibility
  - GoalProgressSheet: Contribution input with proper labels and hints
  - GoalProgressSheet: Quick amount buttons with descriptive labels
  - GoalProgressSheet: Toolbar buttons with clear actions
  - GoalRowView: Combined row element with all goal information
  - GoalRowView: Progress information properly announced
  - GoalRowView: Decorative elements (chevron, icons) hidden from VoiceOver
  - All decorative images marked with .accessibilityHidden(true)
  - All interactive elements have proper .isButton traits
  - Progress information includes percentages and amounts
  - Category information announced for context
  - Follows WCAG 2.1 Level AA accessibility standards

### Fixed - October 2025
- **Fixed ML/AI compilation warnings** (2025-10-29)
  - Build succeeded with only minor unused variable warnings
  - All ML algorithms compile and run correctly

- **Fixed Financial Analytics compilation errors** (2025-10-29)
  - Fixed Transaction mutability issue by creating new instances instead of mutating
  - Fixed TransactionCategory enum case names (.transport instead of .transportation, .healthcare instead of .health)
  - Fixed Budget property references (.budgetAmount instead of .limit)
  - Fixed Goal targetDate optional binding (targetDate is not optional)
  - All analytics code now compiles successfully
- **Fixed MoreScreen navigation title not displaying on initial load (iPhone)** (2025-10-28)
  - Removed NavigationView wrapper that was conflicting with NavigationStack
  - Navigation title now displays correctly when first opening More screen
  - Title previously only appeared when navigating back from subviews
- **Fixed BillsScreen iPad layout to use full width** (2025-10-28)
  - Removed NavigationView wrapper that was causing layout constraints on iPad
  - Added frame modifiers to ensure full width/height usage
  - BillsScreen now properly fills available space like other screens on iPad

### Added - October 2025
- **ML/AI Financial Insights System** (2025-10-29)
  - Created FinancialAIService with machine learning algorithms
  - **Expense Prediction**: Predicts next 3 months expenses using linear regression and seasonal analysis
  - **Anomaly Detection**: Detects unusual transactions using Z-score statistical analysis
  - **Smart Budget Suggestions**: Recommends optimal budgets based on percentile analysis
  - **Personalized Advice**: Generates tailored financial recommendations across 6 categories
  - AIInsightsScreen with beautiful UI for ML insights
  - Confidence scoring for predictions and suggestions
  - Trend analysis (increasing/decreasing/stable)
  - Seasonality factors for more accurate predictions
  - Potential duplicate transaction detection
  - Unusual timing detection (late night transactions)
  - Frequency spike detection
  - Income stability analysis
  - Expense-to-income ratio monitoring
  - Subscription spending aggregation
  - Added 52 Portuguese localization strings for AI features
  - Integrated into More screen as "IA Financeira"

- **Financial Analytics & Insights System** (2025-10-29)
  - Created FinancialAnalyticsService with intelligent analysis capabilities
  - Automatic transaction categorization based on description patterns
  - Spending pattern detection with trend analysis (increasing/decreasing/stable)
  - Budget overrun prediction with daily average projections
  - Financial insight generation across spending, budgets, goals, and savings
  - Risk level assessment (low/medium/high/critical) for budgets
  - Recurring subscription detection
  - Unusual spending detection (transactions > 3x average)
  - Smart recommendations based on spending behavior
  - InsightsScreen with visual cards for patterns, predictions, and insights
  - Filter insights by category (spending, budget, goals, savings)
  - Added 48 Portuguese localization strings for insights
  - Integrated insights into More screen navigation

### Changed - October 2025
- **Standardized add buttons to simple plus icon in navigation bars** (2025-10-28)
  - Changed TransactionsScreen add button from "plus.circle.fill" to "plus"
  - Changed AccountsView add button from "plus.circle.fill" to "plus"
  - Changed LoansScreen add button from "plus.circle.fill" to "plus"
  - Changed CreditCardsScreen add button from "plus.circle.fill" to "plus"
  - Changed BudgetsScreen add button from text "Adicionar" to "plus" icon
  - All navigation bar add buttons now use consistent simple plus icon
  - Note: BillsScreen and GoalScreen already used "plus" icon
- **Updated Portuguese localization for Bills feature** (2025-10-28)
  - Changed "Contas" to "Pagamentos" for all bills-related strings
  - Updated tab.bills, sidebar.bills, and bills.title translations
  - Updated all bill-related UI strings (add, delete, empty state, notifications)
  - Updated descriptions to reflect new terminology
- **Fixed navigation titles visibility on iPhone** (2025-10-28)
  - Wrapped all tab contents in NavigationStack in iPhoneMainView
  - Navigation titles now properly display for Dashboard, Accounts, Transactions, Bills, and More screens
  - Fixed issue where navigation titles were defined but not visible due to missing NavigationStack wrapper
- **Added navigation title to TransactionsScreen** (2025-10-28)
  - Added localized navigation title "tab.transactions" to transactions screen
  - Completes navigation title consistency across all main screens
- **Updated README.md with comprehensive documentation** (2025-10-27)
  - Added Bills Management System section with detailed feature descriptions
  - Added Smart Notifications System documentation
  - Updated project structure to reflect Bills and Notifications modules
  - Updated test coverage numbers (200+ tests)
  - Added UserNotifications to technology stack
  - Updated navigation information (iPhone 5-tab design)
  - Added sample bills information for development

### Fixed - October 2025
- Fixed missing Portuguese translations in Bills feature (2025-10-27)
  - Added translation for common.category → "Categoria"
  - Added translation for common.subcategory → "Subcategoria"
  - Added translation for common.none → "Nenhuma"
  - Fixed account dropdown to use translated account type names
  - Changed mockAccounts to computed property for proper localization
  - Fixed "Dia do Vencimento" dropdown to show "Dia 1", "Dia 2", etc.
  - Fixed "Lembrete" dropdown to show "1 dia antes", "2 dias antes", etc.
- Fixed compilation errors in Bills feature (2025-10-27)
  - Added missing error cases to FirebaseError enum (documentNotFound, databaseError)
  - Updated FirebaseError.invalidData to accept error message parameter
  - Fixed AuthError usage in FirebaseBillRepository (changed userNotAuthenticated to noCurrentUser)
  - Fixed Goal property reference in NotificationManager (percentageAchieved to progressPercentage)
  - Removed duplicate StatCard struct from BillsScreen
  - Added Bills case to MainTabView switch statement
  - Fixed Model+Extensions to include error messages in FirebaseError.invalidData calls

### Added - October 2025
- **Bills Management System** - Complete recurring bills tracking functionality (2025-10-26)
  - Bill model with status tracking (paid, overdue, due soon, upcoming)
  - Auto-calculation of next due dates based on billing day
  - Bill reminders with configurable days before due
  - BillsViewModel with filtering, search, and statistics
  - BillsScreen with swipe actions and status cards
  - AddBillScreen with comprehensive form validation
  - BillDetailView with payment actions and history
  - BillRepository protocol with Mock and Firebase implementations
  - 5 sample bills in MockBillRepository for development
  - Integration with NotificationManager for automatic reminders
  - 56 Portuguese localization strings for bills feature
  - Comprehensive BillTests with 20+ test cases
- **Smart Notifications System** with native iOS UserNotifications framework (2025-10-26)
  - NotificationManager singleton for centralized notification handling
  - Budget alerts when spending exceeds threshold (80%, 90%, 100%)
  - Bill reminders for recurring transactions (3 days before due)
  - Goal progress notifications at milestones (25%, 50%, 75%, 90%, 100%)
  - Suspicious activity alerts for large expenses (>1000)
  - Daily financial summary notifications
  - Interactive notification actions (View, Review, Dismiss)
  - Notification categories for different alert types
  - Complete Portuguese localization for all notifications
- AppDelegate for handling notification callbacks and user interactions
- NotificationManager integration in BudgetViewModel and TransactionViewModel
- Comprehensive NotificationManager test suite with 20+ test cases (2025-10-26)
- Comprehensive test suite for BudgetEnum with period calculations and display properties (2025-10-26)
- Comprehensive test suite for TransactionEnum including subcategories, colors, and sorting (2025-10-26)
- Comprehensive test suite for BudgetViewModel with validation and creation tests (2025-10-26)
- BudgetDetailSheet view for displaying detailed budget information with visual progress (2025-10-23)
- TransactionSubcategory enum with 40+ subcategories across all transaction categories (2025-10-23)
- Transaction category sorting functionality with logical ordering (2025-10-23)
- SwiftUI color support for transaction categories (2025-10-23)
- BudgetPeriod enum properties: icons, display names, and next period calculation (2025-10-17)
- Help texts for account and loan features (2025-10-08)
- Updated help section and category handling (2025-10-07)

### Changed - October 2025
- **Added navigation titles to all main screens** (2025-10-27)
  - Added navigation title to AccountsView (Contas)
  - Added navigation title to DashboardScreen (Dashboard/Painel)
  - Added navigation title to GoalScreen (Metas)
  - Added navigation title to ReportsScreen (Relatórios)
  - Added navigation title to BudgetsScreen (Orçamentos)
  - All screens now display proper titles in navigation bar
- **Reorganized iPhone navigation for better UX** (2025-10-27)
  - Removed Budgets tab from iPhone bottom tab bar
  - Moved Budgets to More screen to reduce tab clutter
  - iPhone tabs now: Dashboard, Accounts, Transactions, Bills, More
- **Enhanced More screen with additional navigation options** (2025-10-27)
  - Added Budgets link to More screen for primary access
  - Added Bills link to More screen for quick access
  - Reorganized More screen items for better user flow
- **Integrated Bills into app navigation** (2025-10-26)
  - Added bills tab to iPhone main navigation (between Transactions and Budgets)
  - Added bills to iPad sidebar navigation
  - Added BillsDetailView for iPad 3-column layout
  - Added tab.bills and sidebar.bills localization strings
- Added createBillRepository() factory method to AppConfiguration (2025-10-26)
- Enhanced NotificationManager with bill-specific reminder methods (2025-10-26)
- Integrated NotificationManager into app lifecycle with permission request (2025-10-26)
- BudgetViewModel now schedules/updates/cancels budget alerts automatically (2025-10-26)
- TransactionViewModel now schedules bill reminders and suspicious activity alerts (2025-10-26)
- Enhanced TransactionCategory enum with subcategories property and Comparable conformance (2025-10-23)
- Enhanced TransactionType enum with icon property (2025-10-23)
- Updated TransactionTests to include tests for new enum properties (subcategories, colors, sorting) (2025-10-26)
- Updated README.md with comprehensive project documentation (2025-10-26)
- Updated FinPessoalTests/README.md with new test files and coverage details (2025-10-26)

### Added - October 2025
- Category management screen (2025-10-05)

### Added - September 2025
- App theming with dynamic colors (2025-10-01)
- Category and subcategory management (2025-09-29)
- Credit Card and Loan features (2025-09-27)
- Categories management feature (2025-09-23, 2025-09-19)
- Transaction categories and subcategories (2025-09-18)
- Transaction import functionality - closes #2 (2025-09-17)
- Help texts for transaction management (2025-09-15)
- Help and support feature (2025-09-14)
- Reports feature (2025-09-13)
- Budget category management feature (2025-09-12)
- Goal management feature (2025-09-10)
- Budget screen (2025-09-08)
- iPad three-column layout and tests (2025-09-01)

### Changed - September 2025
- Moved category related files to Categories feature (2025-09-25)
- Improved goal card layout and responsiveness (2025-09-11)
- Renamed "Goals" tab to "Budgets" (2025-09-08)
- Improved main tab navigation and transaction handling (2025-09-07)
- Improved iPad UI and added localization (2025-09-03)
- Enhanced dashboard and theme settings (2025-09-02)
- Improved transaction filtering and mock data setup (2025-09-01)

### Added - August 2025
- Account and transaction management (2025-08-31)
- Google and Apple Sign-In integration (2025-08-27)
- Improved app UI and localization support (2025-08-24)
- Onboarding flow for new users (2025-08-19, 2025-08-20)
- User authentication and account creation (2025-08-19)
- Firebase integration (2025-08-17)
- Mock authentication and finance repositories (2025-08-17)
- Financial data models and repository (2025-08-17)
- Account and transaction management features (2025-08-16)
- Mock authentication for development (2025-08-14)

### Changed - August 2025
- Refactored onboarding and tab bar labels (2025-08-23)
- Refactored dashboard UI text keys (2025-08-23)
- Refactored app for improved user experience (2025-08-23)
- Renamed OnBoardingView to OnBoardingScreen (2025-08-19)
- Removed loading and error handling from methods (2025-08-19)
- Refactored authentication and UI details (2025-08-18)
- Refactored app architecture (2025-08-18)
- Refactored authentication feature (2025-08-14)

### Fixed - August 2025
- Data filtering and Apple Auth issues (2025-08-18)
- Added authentication error handling (2025-08-17)

## [1.0.0] - 2025-08-13

### Added
- Initial release of FinPessoal
- Core personal finance management features
- User authentication
- Transaction tracking
- Budget management
- Dashboard with financial statistics
- Multi-platform support (iPhone/iPad)

---

## Change Categories

This changelog uses the following categories:
- **Added** for new features
- **Changed** for changes in existing functionality
- **Deprecated** for soon-to-be removed features
- **Removed** for now removed features
- **Fixed** for any bug fixes
- **Security** for vulnerability fixes
